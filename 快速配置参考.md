# 快速配置参考卡片

## 🚀 5分钟快速上手

### 方式 1：使用 GUI（推荐新手）

1. **启动程序** → 右键托盘图标 → "备份设置"
2. **设置备份位置** → 点击"浏览"选择目标文件夹
3. **添加备份源** → 点击"添加"按钮
4. **选择路径** → 选择要备份的文件夹
5. **配置过滤器**：
   - **简单方式**：双击左侧预设列表，添加预设（如 `code`）
   - **自定义方式**：选择模式，添加扩展名
6. **保存配置** → 点击"确定" → "保存"
7. **启动监控** → 右键托盘图标 → "启动监控"

### 方式 2：直接编辑配置文件

1. 复制 `config.example.json` 为 `config.json`
2. 修改配置参数（见下方模板）
3. 保存文件
4. 启动程序

---

## 📋 配置文件结构速查

```json
{
  "backup_destination_base": "备份目标路径",
  "strategy": { /* 备份策略 */ },
  "backup_sources": [
    {
      "path": "要监控的路径",
      "enabled": true,
      "presets": ["预设名称"],
      "filter": { /* 自定义过滤器 */ }
    }
  ]
}
```

---

## 🎯 三种过滤方式对比

| 方式 | 使用场景 | 配置示例 | 优点 |
|------|----------|----------|------|
| **预设** | 常见场景 | `"presets": ["code"]` | 简单快速 |
| **白名单** | 只要特定类型 | `"mode": "whitelist"` | 精确控制 |
| **黑名单** | 排除特定类型 | `"mode": "blacklist"` | 灵活排除 |

---

## 📝 常用配置模板

### 模板 1：代码项目（最常用）
```json
{
  "path": "D:\\Projects",
  "enabled": true,
  "presets": ["code", "common_blacklist"]
}
```
**备份**：源代码、配置文件、文档  
**排除**：临时文件、缓存、依赖包

---

### 模板 2：文档备份
```json
{
  "path": "D:\\Documents",
  "enabled": true,
  "presets": ["documents", "images", "common_blacklist"]
}
```
**备份**：Office文档、PDF、图片  
**排除**：临时文件、系统文件

---

### 模板 3：只备份文本文件
```json
{
  "path": "D:\\Notes",
  "enabled": true,
  "filter": {
    "mode": "whitelist",
    "extensions": [".txt", ".md"]
  }
}
```
**备份**：仅 .txt 和 .md 文件

---

### 模板 4：排除大文件
```json
{
  "path": "D:\\Mixed",
  "enabled": true,
  "filter": {
    "mode": "blacklist",
    "extensions": [".mp4", ".avi", ".zip", ".iso"]
  }
}
```
**备份**：除视频和压缩包外的所有文件

---

## 🔧 备份策略参数速查

| 参数 | 默认值 | 说明 | 推荐值 |
|------|--------|------|--------|
| `retention_days` | 30 | 保留天数 | 7-90 |
| `max_versions_per_file` | 10 | 最大版本数 | 5-20 |
| `enable_compression` | true | 启用压缩 | true |
| `compression_level` | 6 | 压缩级别 (1-9) | 3-6 |
| `max_file_size` | 100MB | 最大文件大小 | 10-100MB |

---

## 🎨 预设列表速查

### 白名单预设（只备份）
- `code` - 代码文件（.py, .cpp, .js, .ts, .vue 等）
- `documents` - 文档文件（.docx, .pdf, .txt 等）
- `images` - 图片文件（.jpg, .png, .gif 等）
- `audio` - 音频文件（.mp3, .wav, .flac 等）
- `video` - 视频文件（.mp4, .avi, .mkv 等）
- `archives` - 压缩文件（.zip, .rar, .7z 等）

### 黑名单预设（排除）
- `common_blacklist` - 常见临时文件（.tmp, .cache, .pyc 等）
- `build_artifacts` - 编译产物（.exe, .dll, .o 等）

---

## 💡 使用技巧

### ✅ 推荐做法
1. **先用预设**：大多数场景预设就够用了
2. **组合预设**：`["code", "common_blacklist"]` 效果很好
3. **测试配置**：先在测试目录试验
4. **查看日志**：遇到问题先看日志文件

### ❌ 避免的错误
1. ❌ 不要监控系统目录（如 `C:\Windows`）
2. ❌ 不要监控太大的目录（如整个 C 盘）
3. ❌ 不要设置过小的 `max_file_size`（会漏掉重要文件）
4. ❌ 不要同时使用太多预设（可能冲突）

---

## 🐛 问题排查清单

### 文件没有备份？
- [ ] 检查 `enabled` 是否为 `true`
- [ ] 检查扩展名是否正确
- [ ] 检查文件大小是否超限
- [ ] 查看日志文件
- [ ] 确认已重启监控

### 备份了不想要的文件？
- [ ] 使用黑名单排除
- [ ] 添加 `common_blacklist` 预设
- [ ] 检查预设配置

### 配置不生效？
- [ ] 检查 JSON 格式是否正确
- [ ] 重启监控服务
- [ ] 查看错误提示

---

## 📂 文件位置

| 文件 | 位置 | 说明 |
|------|------|------|
| 主配置 | `config.json` | 程序运行目录 |
| 预设配置 | `presets.json` | 程序运行目录 |
| 日志文件 | `备份目录/日期/backup_log_*.log` | 每天一个 |
| 备份文件 | `备份目录/日期/相对路径/` | 按日期组织 |

---

## 🔗 相关文档

- **详细配置说明**：`自定义过滤器配置说明.md`
- **完整文档**：`备份配置文件/README.md`
- **功能说明**：`FEATURES_V3.md`
- **更新日志**：`CHANGELOG_V3.md`

---

## 📞 快速帮助

### 我想...

**只备份代码文件**
```json
"presets": ["code", "common_blacklist"]
```

**只备份 .txt 文件**
```json
"filter": {"mode": "whitelist", "extensions": [".txt"]}
```

**排除视频文件**
```json
"filter": {"mode": "blacklist", "extensions": [".mp4", ".avi"]}
```

**备份所有文件**
```json
"presets": []
// 或不设置 filter
```

**临时停止某个路径**
```json
"enabled": false
```

---

## ⚡ 性能优化建议

### 磁盘空间紧张
```json
"retention_days": 7,
"max_versions_per_file": 3,
"compression_level": 9
```

### 追求速度
```json
"enable_compression": false,
"compression_level": 1
```

### 平衡模式（推荐）
```json
"retention_days": 30,
"max_versions_per_file": 10,
"compression_level": 6
```

---

**提示**：配置修改后记得重启监控服务！右键托盘图标 → 停止监控 → 启动监控
