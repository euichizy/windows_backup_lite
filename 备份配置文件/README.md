# å¤‡ä»½é…ç½®æ–‡ä»¶è¯´æ˜

## ğŸ“ æ–‡ä»¶è¯´æ˜

### config.json - ä¸»é…ç½®æ–‡ä»¶
åŒ…å«å¤‡ä»½ç›®æ ‡è·¯å¾„ã€å¤‡ä»½ç­–ç•¥å’Œç›‘æ§æºè·¯å¾„é…ç½®ã€‚

### presets.json - é¢„è®¾è¿‡æ»¤å™¨
å®šä¹‰å„ç§æ–‡ä»¶ç±»å‹çš„è¿‡æ»¤è§„åˆ™ã€‚

## âš™ï¸ config.json é…ç½®è¯¦è§£

### åŸºæœ¬é…ç½®

```json
{
  "backup_destination_base": "D:\\code\\backup\\w"
}
```
- **backup_destination_base**: å¤‡ä»½æ–‡ä»¶å­˜å‚¨çš„æ ¹ç›®å½•
- å¤‡ä»½æ–‡ä»¶ä¼šæŒ‰æ—¥æœŸç»„ç»‡ï¼š`æ ¹ç›®å½•/YYYY-MM-DD/ç›¸å¯¹è·¯å¾„/æ–‡ä»¶å.æ—¶é—´æˆ³.æ‰©å±•å`

### å¤‡ä»½ç­–ç•¥ (strategy)

#### ç‰ˆæœ¬ç®¡ç†
```json
"retention_days": 30
```
- ä¿ç•™æœ€è¿‘ 30 å¤©çš„å¤‡ä»½
- è¶…è¿‡ 30 å¤©çš„ç‰ˆæœ¬ä¼šè¢«è‡ªåŠ¨æ¸…ç†
- **æ³¨æ„**: å§‹ç»ˆä¿ç•™æœ€è¿‘ 3 ä¸ªç‰ˆæœ¬ï¼Œå³ä½¿è¶…è¿‡æ—¶é—´é™åˆ¶

```json
"max_versions_per_file": 10
```
- æ¯ä¸ªæ–‡ä»¶æœ€å¤šä¿ç•™ 10 ä¸ªå†å²ç‰ˆæœ¬
- è¶…è¿‡æ­¤æ•°é‡ï¼Œæœ€æ—§çš„ç‰ˆæœ¬ä¼šè¢«åˆ é™¤

#### å‹ç¼©é…ç½®
```json
"enable_compression": true
```
- å¯ç”¨/ç¦ç”¨å‹ç¼©åŠŸèƒ½
- å¯ç”¨åå¯èŠ‚çœ 30-70% å­˜å‚¨ç©ºé—´

```json
"compression_level": 6
```
- å‹ç¼©çº§åˆ«ï¼š1-9
  - **1-3**: å¿«é€Ÿå‹ç¼©ï¼Œé€‚åˆé¢‘ç¹ä¿®æ”¹çš„æ–‡ä»¶
  - **4-6**: å¹³è¡¡æ¨¡å¼ï¼ˆæ¨èï¼‰
  - **7-9**: æœ€å¤§å‹ç¼©ï¼Œé€‚åˆå½’æ¡£

```json
"compression_threshold": 1024
```
- å°äº 1KB çš„æ–‡ä»¶ä¸å‹ç¼©
- é¿å…å‹ç¼©å°æ–‡ä»¶çš„å¼€é”€

#### å¢é‡å¤‡ä»½
```json
"enable_incremental": true
```
- å¯ç”¨å¢é‡å¤‡ä»½ï¼ˆç›®å‰ä¸»è¦ç”¨äºå†…å®¹å»é‡ï¼‰
- é€šè¿‡ SHA-256 å“ˆå¸Œæ£€æµ‹æ–‡ä»¶æ˜¯å¦çœŸæ­£æ”¹å˜

```json
"incremental_threshold": 1048576
```
- å¤§äº 1MB çš„æ–‡ä»¶æ‰è€ƒè™‘å¢é‡å¤‡ä»½
- å°æ–‡ä»¶ç›´æ¥å®Œæ•´å¤‡ä»½æ›´é«˜æ•ˆ

```json
"full_backup_interval": 10
```
- æ¯ 10 ä¸ªå¢é‡ååšä¸€æ¬¡å®Œæ•´å¤‡ä»½
- ä¿è¯æ¢å¤æ•ˆç‡ï¼ˆæœªæ¥ç‰ˆæœ¬å®ç°ï¼‰

```json
"delta_ratio_threshold": 0.3
```
- å·®å¼‚å°äº 30% æ‰ä½¿ç”¨å¢é‡
- å¦åˆ™ä½¿ç”¨å®Œæ•´å¤‡ä»½ï¼ˆæœªæ¥ç‰ˆæœ¬å®ç°ï¼‰

#### æ–‡ä»¶å¤§å°é™åˆ¶
```json
"max_file_size": 104857600
```
- æœ€å¤§å¤‡ä»½æ–‡ä»¶å¤§å°ï¼š100MB
- è¶…è¿‡æ­¤å¤§å°çš„æ–‡ä»¶ä¼šè¢«è·³è¿‡
- å¯æ ¹æ®éœ€è¦è°ƒæ•´ï¼ˆå•ä½ï¼šå­—èŠ‚ï¼‰

### å¤‡ä»½æºé…ç½® (backup_sources)

#### æ–¹å¼1ï¼šä½¿ç”¨é¢„è®¾ï¼ˆæ¨èï¼‰
```json
{
  "path": "D:\\code\\backup\\test",
  "enabled": true,
  "presets": ["code", "common_blacklist"]
}
```

- **path**: è¦ç›‘æ§çš„ç›®å½•ï¼ˆæ”¯æŒé€’å½’ï¼‰æˆ–å•ä¸ªæ–‡ä»¶
- **enabled**: æ˜¯å¦å¯ç”¨æ­¤å¤‡ä»½æº
- **presets**: åº”ç”¨çš„é¢„è®¾è¿‡æ»¤å™¨åˆ—è¡¨
  - å¤šä¸ªé¢„è®¾ä¼šåˆå¹¶
  - ç™½åå•ä¼˜å…ˆçº§é«˜äºé»‘åå•

#### æ–¹å¼2ï¼šä½¿ç”¨è‡ªå®šä¹‰è¿‡æ»¤å™¨
```json
{
  "path": "D:\\Projects",
  "enabled": true,
  "presets": [],
  "filter": {
    "mode": "whitelist",
    "extensions": [".py", ".js", ".cpp", ".h"]
  }
}
```

- **filter**: è‡ªå®šä¹‰è¿‡æ»¤å™¨é…ç½®
  - **mode**: è¿‡æ»¤æ¨¡å¼
    - `"whitelist"`: ç™½åå•ï¼Œåªå¤‡ä»½æŒ‡å®šçš„æ–‡ä»¶ç±»å‹
    - `"blacklist"`: é»‘åå•ï¼Œæ’é™¤æŒ‡å®šçš„æ–‡ä»¶ç±»å‹
    - `"none"`: æ— è¿‡æ»¤ï¼Œå¤‡ä»½æ‰€æœ‰æ–‡ä»¶
  - **extensions**: æ–‡ä»¶æ‰©å±•ååˆ—è¡¨ï¼ˆå¯å¸¦ç‚¹æˆ–ä¸å¸¦ç‚¹ï¼‰

#### ä¼˜å…ˆçº§è§„åˆ™
- å¦‚æœåŒæ—¶è®¾ç½®äº† `presets` å’Œ `filter`ï¼Œ**`filter` ä¼˜å…ˆ**
- å¦‚æœåªè®¾ç½®äº† `presets`ï¼Œä½¿ç”¨é¢„è®¾è§„åˆ™
- å¦‚æœåªè®¾ç½®äº† `filter`ï¼Œä½¿ç”¨è‡ªå®šä¹‰è§„åˆ™
- å¦‚æœéƒ½æ²¡è®¾ç½®ï¼Œå¤‡ä»½æ‰€æœ‰æ–‡ä»¶

## ğŸ¯ presets.json é¢„è®¾è¯¦è§£

### ç™½åå•é¢„è®¾

#### code - ä»£ç æ–‡ä»¶
åŒ…å«å¸¸è§ç¼–ç¨‹è¯­è¨€çš„æºä»£ç æ–‡ä»¶ï¼š
- Python, C/C++, Java, C#, Go, Rust
- JavaScript/TypeScript, Vue, React
- PHP, Ruby, Lua, Shell è„šæœ¬
- é…ç½®æ–‡ä»¶ (JSON, YAML, TOML, INI)
- æ–‡æ¡£ (Markdown)

#### documents - æ–‡æ¡£æ–‡ä»¶
åŒ…å«å„ç§æ–‡æ¡£æ ¼å¼ï¼š
- Office æ–‡æ¡£ (Word, Excel, PowerPoint)
- PDF, çº¯æ–‡æœ¬
- å¼€æºæ ¼å¼ (ODT, ODS, ODP)

#### images - å›¾ç‰‡æ–‡ä»¶
åŒ…å«å¸¸è§å›¾ç‰‡æ ¼å¼ï¼š
- å¸¸è§„æ ¼å¼ (JPG, PNG, GIF, BMP, SVG)
- ä¸“ä¸šæ ¼å¼ (PSD, AI, RAW)

#### audio - éŸ³é¢‘æ–‡ä»¶
MP3, WAV, FLAC, AAC ç­‰

#### video - è§†é¢‘æ–‡ä»¶
MP4, AVI, MKV, MOV ç­‰

#### archives - å‹ç¼©æ–‡ä»¶
ZIP, RAR, 7Z, TAR, GZ ç­‰

#### ebooks - ç”µå­ä¹¦
EPUB, MOBI, AZW, PDF

#### fonts - å­—ä½“æ–‡ä»¶
TTF, OTF, WOFF ç­‰

### é»‘åå•é¢„è®¾

#### common_blacklist - å¸¸è§ä¸´æ—¶æ–‡ä»¶
æ’é™¤ï¼š
- ä¸´æ—¶æ–‡ä»¶ (.tmp, .temp, .bak)
- ç¼–è¾‘å™¨ä¸´æ—¶æ–‡ä»¶ (.swp, .swo)
- ç¼“å­˜æ–‡ä»¶ (.cache, .pyc, .pyo)
- ç³»ç»Ÿæ–‡ä»¶ (.DS_Store, thumbs.db)
- ç‰ˆæœ¬æ§åˆ¶ç›®å½• (.git, .svn)
- ä¾èµ–ç›®å½• (node_modules, __pycache__)

#### build_artifacts - ç¼–è¯‘äº§ç‰©
æ’é™¤ï¼š
- å¯æ‰§è¡Œæ–‡ä»¶ (.exe, .dll, .so)
- ç›®æ ‡æ–‡ä»¶ (.o, .obj)
- åº“æ–‡ä»¶ (.lib, .a)
- è°ƒè¯•æ–‡ä»¶ (.pdb, .ilk)
- ç¼–è¯‘ç¼“å­˜ (.pyc, .class)

## ğŸ“ é…ç½®ç¤ºä¾‹

### ç¤ºä¾‹ 1: å¼€å‘ç¯å¢ƒï¼ˆå¿«é€Ÿå¤‡ä»½ï¼‰
```json
{
  "backup_destination_base": "E:\\DevBackup",
  "strategy": {
    "retention_days": 7,
    "max_versions_per_file": 5,
    "enable_compression": true,
    "compression_level": 3,
    "max_file_size": 10485760
  },
  "backup_sources": [
    {
      "path": "D:\\Projects",
      "enabled": true,
      "preset": ["code", "common_blacklist", "build_artifacts"]
    }
  ]
}
```
**ç‰¹ç‚¹**: çŸ­ä¿ç•™æœŸï¼Œå¿«é€Ÿå‹ç¼©ï¼Œæ’é™¤ç¼–è¯‘äº§ç‰©

### ç¤ºä¾‹ 2: æ–‡æ¡£å¤‡ä»½ï¼ˆé«˜å‹ç¼©ï¼‰
```json
{
  "backup_destination_base": "F:\\DocumentBackup",
  "strategy": {
    "retention_days": 90,
    "max_versions_per_file": 20,
    "enable_compression": true,
    "compression_level": 9,
    "max_file_size": 52428800
  },
  "backup_sources": [
    {
      "path": "D:\\Documents",
      "enabled": true,
      "preset": ["documents", "images", "common_blacklist"]
    }
  ]
}
```
**ç‰¹ç‚¹**: é•¿ä¿ç•™æœŸï¼Œæœ€é«˜å‹ç¼©ï¼Œé€‚åˆé‡è¦æ–‡æ¡£

### ç¤ºä¾‹ 3: å¤šè·¯å¾„ç›‘æ§
```json
{
  "backup_destination_base": "G:\\Backups",
  "strategy": {
    "retention_days": 30,
    "max_versions_per_file": 10,
    "enable_compression": true,
    "compression_level": 6
  },
  "backup_sources": [
    {
      "path": "D:\\Projects",
      "enabled": true,
      "presets": ["code", "common_blacklist"]
    },
    {
      "path": "D:\\Documents",
      "enabled": true,
      "presets": ["documents", "common_blacklist"]
    },
    {
      "path": "D:\\Photos",
      "enabled": false,
      "presets": ["images"]
    }
  ]
}
```
**ç‰¹ç‚¹**: å¤šä¸ªè·¯å¾„ï¼Œä¸åŒé¢„è®¾ï¼Œçµæ´»æ§åˆ¶

### ç¤ºä¾‹ 4: ä½¿ç”¨è‡ªå®šä¹‰è¿‡æ»¤å™¨ï¼ˆç™½åå•ï¼‰
```json
{
  "backup_destination_base": "E:\\CodeBackup",
  "strategy": {
    "retention_days": 60,
    "max_versions_per_file": 20,
    "enable_compression": true,
    "compression_level": 9
  },
  "backup_sources": [
    {
      "path": "D:\\Projects\\WebApp",
      "enabled": true,
      "presets": [],
      "filter": {
        "mode": "whitelist",
        "extensions": [".js", ".ts", ".vue", ".css", ".html", ".json"]
      }
    }
  ]
}
```
**ç‰¹ç‚¹**: åªå¤‡ä»½å‰ç«¯ä»£ç æ–‡ä»¶ï¼Œç²¾ç¡®æ§åˆ¶

### ç¤ºä¾‹ 5: ä½¿ç”¨è‡ªå®šä¹‰è¿‡æ»¤å™¨ï¼ˆé»‘åå•ï¼‰
```json
{
  "backup_destination_base": "F:\\Backup",
  "strategy": {
    "retention_days": 14,
    "max_versions_per_file": 5,
    "enable_compression": true,
    "compression_level": 3
  },
  "backup_sources": [
    {
      "path": "D:\\WorkFiles",
      "enabled": true,
      "presets": [],
      "filter": {
        "mode": "blacklist",
        "extensions": [".tmp", ".log", ".cache", ".mp4", ".avi", ".zip"]
      }
    }
  ]
}
```
**ç‰¹ç‚¹**: æ’é™¤ä¸´æ—¶æ–‡ä»¶å’Œå¤§æ–‡ä»¶ï¼Œå¤‡ä»½å…¶ä»–æ‰€æœ‰æ–‡ä»¶

## ğŸ”§ è°ƒä¼˜å»ºè®®

### ç£ç›˜ç©ºé—´æœ‰é™
```json
{
  "retention_days": 7,
  "max_versions_per_file": 5,
  "enable_compression": true,
  "compression_level": 9,
  "max_file_size": 10485760
}
```

### CPU æ€§èƒ½æœ‰é™
```json
{
  "retention_days": 30,
  "max_versions_per_file": 10,
  "enable_compression": true,
  "compression_level": 1,
  "compression_threshold": 10240
}
```

### è¿½æ±‚é€Ÿåº¦
```json
{
  "retention_days": 14,
  "max_versions_per_file": 8,
  "enable_compression": false,
  "max_file_size": 52428800
}
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **è·¯å¾„æ ¼å¼**: Windows è·¯å¾„ä½¿ç”¨åŒåæ–œæ  `\\` æˆ–å•æ­£æ–œæ  `/`
2. **é…ç½®ç”Ÿæ•ˆ**: ä¿®æ”¹é…ç½®åéœ€è¦é‡å¯ç›‘æ§æœåŠ¡
3. **ç£ç›˜ç©ºé—´**: å®šæœŸæ£€æŸ¥å¤‡ä»½ç›®å½•å¤§å°
4. **é¢„è®¾å†²çª**: 
   - ç™½åå• + é»‘åå• = ç™½åå•ä¼˜å…ˆ
   - å¤šä¸ªç™½åå• = åˆå¹¶æ‰€æœ‰æ‰©å±•å
5. **å‹ç¼©æ–‡ä»¶**: å·²å‹ç¼©çš„æ–‡ä»¶ï¼ˆå¦‚ .jpg, .zipï¼‰ä¸ä¼šå†æ¬¡å‹ç¼©

## ğŸ› å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆæŸäº›æ–‡ä»¶æ²¡æœ‰å¤‡ä»½ï¼Ÿ
A: æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
1. æ–‡ä»¶æ‰©å±•åæ˜¯å¦åœ¨ç™½åå•ä¸­ï¼ˆå¦‚æœä½¿ç”¨ç™½åå•æ¨¡å¼ï¼‰
2. æ–‡ä»¶æ˜¯å¦åœ¨é»‘åå•ä¸­ï¼ˆå¦‚æœä½¿ç”¨é»‘åå•æ¨¡å¼ï¼‰
3. æ–‡ä»¶å¤§å°æ˜¯å¦è¶…è¿‡ max_file_size
4. æ–‡ä»¶å†…å®¹æ˜¯å¦çœŸæ­£æ”¹å˜ï¼ˆå“ˆå¸Œå»é‡ï¼‰
5. æ˜¯å¦åŒæ—¶è®¾ç½®äº† presets å’Œ filterï¼ˆfilter ä¼šè¦†ç›– presetsï¼‰
6. æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶ï¼š`å¤‡ä»½ç›®å½•/æ—¥æœŸ/backup_log_æ—¥æœŸ.log`

### Q: å¤‡ä»½æ–‡ä»¶å¤ªå¤šæ€ä¹ˆåŠï¼Ÿ
A: è°ƒæ•´ä»¥ä¸‹å‚æ•°ï¼š
- å‡å°‘ `retention_days`
- å‡å°‘ `max_versions_per_file`
- å¯ç”¨å‹ç¼©å¹¶æé«˜å‹ç¼©çº§åˆ«

### Q: å¤‡ä»½é€Ÿåº¦å¤ªæ…¢ï¼Ÿ
A: ä¼˜åŒ–æ–¹æ¡ˆï¼š
- é™ä½ `compression_level`
- å¢åŠ  `compression_threshold`
- å‡å°‘ç›‘æ§çš„æ–‡ä»¶æ•°é‡
- æ·»åŠ æ›´å¤šé»‘åå•è§„åˆ™

### Q: å¦‚ä½•æ¢å¤å¤‡ä»½ï¼Ÿ
A: 
1. æ‰¾åˆ°å¤‡ä»½æ–‡ä»¶ï¼š`å¤‡ä»½ç›®å½•/æ—¥æœŸ/ç›¸å¯¹è·¯å¾„/`
2. å¦‚æœæ˜¯ .gz æ–‡ä»¶ï¼Œéœ€è¦å…ˆè§£å‹
3. å¤åˆ¶åˆ°åŸä½ç½®æˆ–æ–°ä½ç½®

### Q: é¢„è®¾å’Œè‡ªå®šä¹‰è¿‡æ»¤å™¨æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ
A: 
- **é¢„è®¾**ï¼šä½¿ç”¨ presets.json ä¸­é¢„å®šä¹‰çš„è§„åˆ™ï¼Œç®€å•å¿«é€Ÿ
- **è‡ªå®šä¹‰è¿‡æ»¤å™¨**ï¼šä½¿ç”¨ filter å­—æ®µè‡ªå·±å®šä¹‰è§„åˆ™ï¼Œæ›´çµæ´»
- **ä¼˜å…ˆçº§**ï¼šå¦‚æœåŒæ—¶è®¾ç½®ï¼Œfilter ä¼˜å…ˆäº presets
- **æ¨è**ï¼šä¸€èˆ¬æƒ…å†µç”¨é¢„è®¾å°±å¤Ÿäº†ï¼Œç‰¹æ®Šéœ€æ±‚æ‰ç”¨è‡ªå®šä¹‰è¿‡æ»¤å™¨

### Q: å¦‚ä½•åœ¨ GUI ä¸­è®¾ç½®è‡ªå®šä¹‰è¿‡æ»¤å™¨ï¼Ÿ
A: 
1. å³é”®æ‰˜ç›˜å›¾æ ‡ â†’ "å¤‡ä»½è®¾ç½®"
2. ç‚¹å‡»"æ·»åŠ "æˆ–é€‰ä¸­åç‚¹å‡»"é…ç½®"
3. åœ¨å³ä¾§"è‡ªå®šä¹‰æ–‡ä»¶ç±»å‹è¿‡æ»¤"åŒºåŸŸï¼š
   - é€‰æ‹©æ¨¡å¼ï¼ˆç™½åå•/é»‘åå•/æ— ï¼‰
   - åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥æ‰©å±•åï¼ˆå¦‚ txtï¼‰
   - ç‚¹å‡»"æ·»åŠ "æŒ‰é’®
   - é‡å¤æ·»åŠ å¤šä¸ªæ‰©å±•å
4. ç‚¹å‡»"ç¡®å®š"ä¿å­˜
5. ç‚¹å‡»"ä¿å­˜"åº”ç”¨é…ç½®

### Q: è‡ªå®šä¹‰è¿‡æ»¤å™¨çš„é…ç½®ä¿å­˜åœ¨å“ªé‡Œï¼Ÿ
A: 
ä¿å­˜åœ¨ `config.json` æ–‡ä»¶çš„ `backup_sources` æ•°ç»„ä¸­ï¼Œæ¯ä¸ªæºçš„ `filter` å­—æ®µã€‚
ç¤ºä¾‹ï¼š
```json
{
  "path": "D:\\Projects",
  "enabled": true,
  "filter": {
    "mode": "whitelist",
    "extensions": [".py", ".js"]
  }
}
```

## ğŸ“Š å­˜å‚¨ç©ºé—´ä¼°ç®—

| åœºæ™¯ | æ–‡ä»¶æ•° | åŸå§‹å¤§å° | å‹ç¼©å | 30å¤©ç´¯è®¡ |
|------|--------|----------|--------|----------|
| å°å‹é¡¹ç›® | 500 | 50 MB | 18 MB | 180 MB |
| ä¸­å‹é¡¹ç›® | 2000 | 200 MB | 70 MB | 700 MB |
| å¤§å‹é¡¹ç›® | 5000 | 500 MB | 175 MB | 1.75 GB |
| æ–‡æ¡£å¤‡ä»½ | 1000 | 300 MB | 120 MB | 1.2 GB |

*å‡è®¾æ¯å¤©ä¿®æ”¹ 10% çš„æ–‡ä»¶ï¼Œä¿ç•™ 10 ä¸ªç‰ˆæœ¬*

## ğŸ”„ é…ç½®æ›´æ–°æ—¥å¿—

### V3.0 (å½“å‰ç‰ˆæœ¬)
- âœ… æ·»åŠ å¤‡ä»½ç­–ç•¥é…ç½®
- âœ… æ”¯æŒå‹ç¼©åŠŸèƒ½
- âœ… æ”¯æŒç‰ˆæœ¬æ¸…ç†
- âœ… æ”¯æŒå†…å®¹å»é‡
- âœ… æ·»åŠ  build_artifacts é¢„è®¾

### V2.0
- åŸºç¡€å¤‡ä»½åŠŸèƒ½
- é¢„è®¾è¿‡æ»¤å™¨
- é˜²æŠ–åŠ¨æœºåˆ¶

## ğŸ“ æŠ€æœ¯æ”¯æŒ

é…ç½®é—®é¢˜è¯·å‚è€ƒï¼š
- ä¸»æ–‡æ¡£: CONFIG_GUIDE.md
- åŠŸèƒ½è¯´æ˜: FEATURES_V3.md
- æ—¥å¿—æ–‡ä»¶: å¤‡ä»½ç›®å½•/æ—¥æœŸ/backup_log_æ—¥æœŸ.log
