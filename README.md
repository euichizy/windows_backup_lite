# CodeBackup - æ™ºèƒ½æ–‡ä»¶å¤‡ä»½ç›‘æ§ç³»ç»Ÿ

<div align="center">

**ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„ Windows æ–‡ä»¶å¤‡ä»½ç›‘æ§å·¥å…·ï¼Œæ”¯æŒå®æ—¶ç›‘æ§ã€æ™ºèƒ½å‹ç¼©ã€ç‰ˆæœ¬ç®¡ç†å’Œå¢é‡å¤‡ä»½**

[![C++](https://img.shields.io/badge/C++-17-00599C.svg)](https://isocpp.org/)
[![Platform](https://img.shields.io/badge/platform-Windows-0078D6.svg)](https://www.microsoft.com/windows)
[![License](https://img.shields.io/badge/license-MIT-green.svg)](LICENSE)

</div>

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ” å®æ—¶ç›‘æ§
- åŸºäº `efsw` çš„é«˜æ€§èƒ½æ–‡ä»¶ç³»ç»Ÿç›‘æ§
- æ”¯æŒé€’å½’ç›‘æ§å¤šä¸ªç›®å½•
- è‡ªåŠ¨æ£€æµ‹æ–‡ä»¶åˆ›å»ºã€ä¿®æ”¹å’Œåˆ é™¤äº‹ä»¶
- é˜²æŠ–åŠ¨æœºåˆ¶ï¼Œé¿å…é‡å¤å¤‡ä»½ï¼ˆ5ç§’å†…åŒä¸€æ–‡ä»¶åªå¤‡ä»½ä¸€æ¬¡ï¼‰

### ğŸ—œï¸ æ™ºèƒ½å‹ç¼©
- å¯é…ç½®çš„å‹ç¼©çº§åˆ«ï¼ˆ1-9ï¼‰
- è‡ªåŠ¨è·³è¿‡å·²å‹ç¼©æ–‡ä»¶ï¼ˆå¦‚ .jpg, .zipï¼‰
- å¯è®¾ç½®å‹ç¼©é˜ˆå€¼ï¼Œå°æ–‡ä»¶ä¸å‹ç¼©
- å¹³å‡èŠ‚çœ 30-70% å­˜å‚¨ç©ºé—´

### ğŸ“¦ ç‰ˆæœ¬ç®¡ç†
- è‡ªåŠ¨ä¿ç•™å¤šä¸ªå†å²ç‰ˆæœ¬
- å¯é…ç½®ä¿ç•™å¤©æ•°å’Œç‰ˆæœ¬æ•°é‡
- æ™ºèƒ½æ¸…ç†è¿‡æœŸç‰ˆæœ¬
- å§‹ç»ˆä¿ç•™æœ€è¿‘ 3 ä¸ªç‰ˆæœ¬ï¼ˆå³ä½¿è¶…è¿‡æ—¶é—´é™åˆ¶ï¼‰

### ğŸ”„ å¢é‡å¤‡ä»½
- åŸºäº SHA-256 å“ˆå¸Œçš„å†…å®¹å»é‡
- è‡ªåŠ¨æ£€æµ‹æ–‡ä»¶æ˜¯å¦çœŸæ­£æ”¹å˜
- æ”¯æŒå¢é‡å¤‡ä»½ç­–ç•¥ï¼ˆæœªæ¥ç‰ˆæœ¬å®Œæ•´å®ç°ï¼‰
- å¯é…ç½®å¢é‡å¤‡ä»½é˜ˆå€¼

### ğŸ¯ çµæ´»è¿‡æ»¤
- é¢„è®¾è¿‡æ»¤å™¨ï¼šä»£ç ã€æ–‡æ¡£ã€å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ç­‰
- è‡ªå®šä¹‰ç™½åå•/é»‘åå•æ¨¡å¼
- æ”¯æŒåŒåˆ—è¡¨æ¨¡å¼ï¼ˆåŒæ—¶è®¾ç½®ç™½åå•å’Œé»‘åå•ï¼‰
- æ™ºèƒ½æ’é™¤ä¸´æ—¶æ–‡ä»¶å’Œç¼–è¯‘äº§ç‰©

### ğŸ–¥ï¸ ç®€å•ç•Œé¢
- Windows ç³»ç»Ÿæ‰˜ç›˜å›¾æ ‡
- å³é”®èœå•å¿«é€Ÿæ“ä½œ
- å¯è§†åŒ–é…ç½®å¯¹è¯æ¡†
- å®æ—¶çŠ¶æ€æ˜¾ç¤ºå’Œç»Ÿè®¡ä¿¡æ¯

### âš¡ æ€§èƒ½
- å¼‚æ­¥å¤‡ä»½é˜Ÿåˆ—ï¼Œå¤šçº¿ç¨‹å¤„ç†
- æŒ‡æ•°é€€é¿é‡è¯•æœºåˆ¶
- æ™ºèƒ½é˜²æŠ–åŠ¨
- ä½ CPU å’Œå†…å­˜å ç”¨

## ğŸ“‹ ç³»ç»Ÿè¦æ±‚

- **æ“ä½œç³»ç»Ÿ**: Windows 10/11
- **ç¼–è¯‘å™¨**: MSVC 2019+ æˆ–æ”¯æŒ C++17 çš„ç¼–è¯‘å™¨
- **CMake**: 3.15+
- **vcpkg**: ç”¨äºä¾èµ–ç®¡ç†

## ğŸ”§ ä¾èµ–é¡¹

- [nlohmann-json](https://github.com/nlohmann/json) - JSON è§£æ
- [spdlog](https://github.com/gabime/spdlog) - æ—¥å¿—è®°å½•
- [efsw](https://github.com/SpartanJ/efsw) - æ–‡ä»¶ç³»ç»Ÿç›‘æ§
- [zlib](https://www.zlib.net/) - æ•°æ®å‹ç¼©


## ğŸ“– é…ç½®æŒ‡å—

### åŸºæœ¬é…ç½®ç»“æ„

```json
{
  "backup_destination_base": "å¤‡ä»½æ ¹ç›®å½•",
  "strategy": { /* å¤‡ä»½ç­–ç•¥ */ },
  "backup_sources": [ /* ç›‘æ§æºåˆ—è¡¨ */ ]
}
```

### å¤‡ä»½ç­–ç•¥é…ç½®

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `retention_days` | int | 30 | ä¿ç•™æœ€è¿‘ N å¤©çš„å¤‡ä»½ |
| `max_versions_per_file` | int | 10 | æ¯ä¸ªæ–‡ä»¶æœ€å¤šä¿ç•™ N ä¸ªç‰ˆæœ¬ |
| `enable_compression` | bool | true | æ˜¯å¦å¯ç”¨å‹ç¼© |
| `compression_level` | int | 6 | å‹ç¼©çº§åˆ«ï¼ˆ1-9ï¼‰ |
| `compression_threshold` | int | 1024 | å°äºæ­¤å¤§å°ä¸å‹ç¼©ï¼ˆå­—èŠ‚ï¼‰ |
| `enable_incremental` | bool | true | æ˜¯å¦å¯ç”¨å¢é‡å¤‡ä»½ |
| `incremental_threshold` | int | 1048576 | å¤§äºæ­¤å¤§å°æ‰è€ƒè™‘å¢é‡ï¼ˆ1MBï¼‰ |
| `max_file_size` | int | 104857600 | æœ€å¤§å¤‡ä»½æ–‡ä»¶å¤§å°ï¼ˆ100MBï¼‰ |

### å¤‡ä»½æºé…ç½®

#### æ–¹å¼ 1ï¼šä½¿ç”¨é¢„è®¾ï¼ˆæ¨èï¼‰

```json
{
  "path": "D:\\Projects",
  "enabled": true,
  "presets": ["code", "common_blacklist"]
}
```

#### æ–¹å¼ 2ï¼šè‡ªå®šä¹‰è¿‡æ»¤å™¨

```json
{
  "path": "D:\\Documents",
  "enabled": true,
  "filter": {
    "mode": "whitelist",
    "extensions": [".txt", ".pdf", ".docx"]
  }
}
```

#### æ–¹å¼ 3ï¼šåŒåˆ—è¡¨æ¨¡å¼

```json
{
  "path": "D:\\Projects",
  "enabled": true,
  "filter": {
    "whitelist_extensions": [".cpp", ".h", ".py"],
    "blacklist_extensions": [".tmp", ".log"]
  }
}
```

### å¯ç”¨é¢„è®¾

**ç™½åå•é¢„è®¾**ï¼š
- `code` - ä»£ç æ–‡ä»¶ï¼ˆ.cpp, .py, .js, .java ç­‰ï¼‰
- `documents` - æ–‡æ¡£æ–‡ä»¶ï¼ˆ.docx, .pdf, .txt ç­‰ï¼‰
- `images` - å›¾ç‰‡æ–‡ä»¶ï¼ˆ.jpg, .png, .gif ç­‰ï¼‰
- `audio` - éŸ³é¢‘æ–‡ä»¶ï¼ˆ.mp3, .wav, .flac ç­‰ï¼‰
- `video` - è§†é¢‘æ–‡ä»¶ï¼ˆ.mp4, .avi, .mkv ç­‰ï¼‰
- `archives` - å‹ç¼©æ–‡ä»¶ï¼ˆ.zip, .rar, .7z ç­‰ï¼‰

**é»‘åå•é¢„è®¾**ï¼š
- `common_blacklist` - å¸¸è§ä¸´æ—¶æ–‡ä»¶å’Œç³»ç»Ÿæ–‡ä»¶
- `build_artifacts` - ç¼–è¯‘äº§ç‰©å’Œå¯æ‰§è¡Œæ–‡ä»¶

è¯¦ç»†é…ç½®è¯´æ˜è¯·å‚è€ƒ [å¤‡ä»½é…ç½®æ–‡ä»¶/README.md](å¤‡ä»½é…ç½®æ–‡ä»¶/README.md)

## ğŸ“‚ å¤‡ä»½æ–‡ä»¶ç»„ç»‡

å¤‡ä»½æ–‡ä»¶æŒ‰ä»¥ä¸‹ç»“æ„ç»„ç»‡ï¼š

```
å¤‡ä»½æ ¹ç›®å½•/
â”œâ”€â”€ 2024-11-11/
â”‚   â”œâ”€â”€ backup_log_2024-11-11.log
â”‚   â””â”€â”€ Projects/
â”‚       â””â”€â”€ MyApp/
â”‚           â”œâ”€â”€ main.cpp.20241111_143022.cpp
â”‚           â”œâ”€â”€ main.cpp.20241111_150315.cpp.gz
â”‚           â””â”€â”€ config.json.20241111_151200.json
â”œâ”€â”€ 2024-11-12/
â”‚   â””â”€â”€ ...
â””â”€â”€ ...
```

- æŒ‰æ—¥æœŸåˆ†ç»„ï¼ˆYYYY-MM-DDï¼‰
- ä¿ç•™åŸå§‹ç›®å½•ç»“æ„
- æ–‡ä»¶åæ ¼å¼ï¼š`åŸæ–‡ä»¶å.æ—¶é—´æˆ³.æ‰©å±•å[.gz]`
- å‹ç¼©æ–‡ä»¶æ·»åŠ  `.gz` åç¼€

## ğŸ¯ ä½¿ç”¨åœºæ™¯

### åœºæ™¯ 1ï¼šä»£ç é¡¹ç›®å¤‡ä»½

```json
{
  "backup_destination_base": "E:\\CodeBackup",
  "strategy": {
    "retention_days": 30,
    "max_versions_per_file": 20,
    "enable_compression": true,
    "compression_level": 6
  },
  "backup_sources": [
    {
      "path": "D:\\Projects",
      "enabled": true,
      "presets": ["code", "common_blacklist", "build_artifacts"]
    }
  ]
}
```

**ç‰¹ç‚¹**ï¼šæ’é™¤ç¼–è¯‘äº§ç‰©ï¼Œä¿ç•™æ›´å¤šç‰ˆæœ¬ï¼Œé€‚ä¸­å‹ç¼©

### åœºæ™¯ 2ï¼šæ–‡æ¡£å¤‡ä»½

```json
{
  "backup_destination_base": "F:\\DocumentBackup",
  "strategy": {
    "retention_days": 90,
    "max_versions_per_file": 10,
    "enable_compression": true,
    "compression_level": 9
  },
  "backup_sources": [
    {
      "path": "D:\\Documents",
      "enabled": true,
      "presets": ["documents", "images", "common_blacklist"]
    }
  ]
}
```

**ç‰¹ç‚¹**ï¼šé•¿ä¿ç•™æœŸï¼Œæœ€é«˜å‹ç¼©ï¼Œé€‚åˆé‡è¦æ–‡æ¡£

### åœºæ™¯ 3ï¼šå¤šè·¯å¾„ç›‘æ§

```json
{
  "backup_sources": [
    {
      "path": "D:\\Projects",
      "enabled": true,
      "presets": ["code", "common_blacklist"]
    },
    {
      "path": "D:\\Documents",
      "enabled": true,
      "presets": ["documents"]
    },
    {
      "path": "C:\\Users\\YourName\\Desktop\\important.txt",
      "enabled": true,
      "presets": []
    }
  ]
}
```

**ç‰¹ç‚¹**ï¼šæ”¯æŒç›‘æ§å¤šä¸ªç›®å½•å’Œå•ä¸ªæ–‡ä»¶

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### ç£ç›˜ç©ºé—´æœ‰é™
```json
{
  "retention_days": 7,
  "max_versions_per_file": 5,
  "compression_level": 9,
  "max_file_size": 10485760
}
```

### CPU æ€§èƒ½æœ‰é™
```json
{
  "compression_level": 1,
  "compression_threshold": 10240
}
```

### è¿½æ±‚é€Ÿåº¦
```json
{
  "enable_compression": false
}
```

## ğŸ” æ—¥å¿—å’Œç›‘æ§

### æ—¥å¿—ä½ç½®
```
å¤‡ä»½æ ¹ç›®å½•/YYYY-MM-DD/backup_log_YYYY-MM-DD.log
```

### æ—¥å¿—å†…å®¹
- å¤‡ä»½æ“ä½œè®°å½•
- é”™è¯¯å’Œè­¦å‘Šä¿¡æ¯
- æ€§èƒ½ç»Ÿè®¡
- ç‰ˆæœ¬æ¸…ç†è®°å½•

### ç»Ÿè®¡ä¿¡æ¯
ç¨‹åºåœæ­¢æ—¶ä¼šè¾“å‡ºï¼š
- æˆåŠŸå¤‡ä»½æ–‡ä»¶æ•°
- æ€»å¤‡ä»½å¤§å°
- å‹ç¼©å¤‡ä»½æ•°
- å¢é‡å¤‡ä»½æ•°
- å¤±è´¥å’Œè·³è¿‡çš„å¤‡ä»½æ•°

## â“ å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆæŸäº›æ–‡ä»¶æ²¡æœ‰å¤‡ä»½ï¼Ÿ

æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
1. æ–‡ä»¶æ‰©å±•åæ˜¯å¦åœ¨è¿‡æ»¤è§„åˆ™ä¸­
2. æ–‡ä»¶å¤§å°æ˜¯å¦è¶…è¿‡ `max_file_size`
3. æ–‡ä»¶å†…å®¹æ˜¯å¦çœŸæ­£æ”¹å˜ï¼ˆå“ˆå¸Œå»é‡ï¼‰
4. æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶äº†è§£è¯¦ç»†åŸå› 

### Q: å¦‚ä½•æ¢å¤å¤‡ä»½æ–‡ä»¶ï¼Ÿ

1. æ‰¾åˆ°å¤‡ä»½æ–‡ä»¶ï¼š`å¤‡ä»½ç›®å½•/æ—¥æœŸ/ç›¸å¯¹è·¯å¾„/`
2. å¦‚æœæ˜¯ `.gz` æ–‡ä»¶ï¼Œå…ˆè§£å‹
3. å¤åˆ¶åˆ°åŸä½ç½®æˆ–æ–°ä½ç½®

### Q: å¤‡ä»½å ç”¨ç©ºé—´å¤ªå¤§æ€ä¹ˆåŠï¼Ÿ

è°ƒæ•´ä»¥ä¸‹å‚æ•°ï¼š
- å‡å°‘ `retention_days`
- å‡å°‘ `max_versions_per_file`
- æé«˜ `compression_level`
- æ·»åŠ æ›´å¤šé»‘åå•è§„åˆ™

### Q: å¦‚ä½•å¤‡ä»½å•ä¸ªæ–‡ä»¶ï¼Ÿ

åœ¨ `backup_sources` ä¸­ç›´æ¥æŒ‡å®šæ–‡ä»¶è·¯å¾„ï¼š
```json
{
  "path": "C:\\important.txt",
  "enabled": true
}
```

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### é¡¹ç›®ç»“æ„

```
codebackup/
â”œâ”€â”€ include/              # å¤´æ–‡ä»¶
â”‚   â”œâ”€â”€ backup_handler.h
â”‚   â”œâ”€â”€ backup_strategy.h
â”‚   â”œâ”€â”€ compression_utils.h
â”‚   â”œâ”€â”€ config_loader.h
â”‚   â”œâ”€â”€ gui_app.h
â”‚   â”œâ”€â”€ hash_utils.h
â”‚   â”œâ”€â”€ logger.h
â”‚   â””â”€â”€ version_manager.h
â”œâ”€â”€ src/                  # æºæ–‡ä»¶
â”‚   â”œâ”€â”€ backup_handler.cpp
â”‚   â”œâ”€â”€ compression_utils.cpp
â”‚   â”œâ”€â”€ config_loader.cpp
â”‚   â”œâ”€â”€ gui_app.cpp
â”‚   â”œâ”€â”€ hash_utils.cpp
â”‚   â”œâ”€â”€ logger.cpp
â”‚   â”œâ”€â”€ main.cpp          # æ§åˆ¶å°ç‰ˆæœ¬ï¼ˆå·²æ³¨é‡Šï¼‰
â”‚   â”œâ”€â”€ main_gui.cpp      # GUI ç‰ˆæœ¬
â”‚   â””â”€â”€ version_manager.cpp
â”œâ”€â”€ å¤‡ä»½é…ç½®æ–‡ä»¶/         # é…ç½®æ–‡ä»¶ç¤ºä¾‹
â”‚   â”œâ”€â”€ config.json
â”‚   â”œâ”€â”€ presets.json
â”‚   â””â”€â”€ README.md
â”œâ”€â”€ CMakeLists.txt
â”œâ”€â”€ vcpkg.json
â””â”€â”€ README.md
```

### æ ¸å¿ƒç±»è¯´æ˜

- **BackupHandler**: æ–‡ä»¶ç›‘æ§å’Œå¤‡ä»½å¤„ç†
- **VersionManager**: ç‰ˆæœ¬ç®¡ç†å’Œæ¸…ç†
- **ConfigLoader**: é…ç½®æ–‡ä»¶åŠ è½½
- **GuiApp**: GUI åº”ç”¨ç¨‹åº
- **CompressionUtils**: å‹ç¼©å·¥å…·
- **HashUtils**: å“ˆå¸Œè®¡ç®—

### ç¼–è¯‘é€‰é¡¹

å¯ç”¨æ§åˆ¶å°ç‰ˆæœ¬ï¼ˆåœ¨ CMakeLists.txt ä¸­å–æ¶ˆæ³¨é‡Šï¼‰ï¼š
```cmake
add_executable(codebackup
    src/main.cpp
    ${COMMON_SOURCES}
)
```

## ğŸ“ æ›´æ–°æ—¥å¿—

### V3.0.0 (å½“å‰ç‰ˆæœ¬)
- âœ… æ·»åŠ  GUI ç•Œé¢
- âœ… æ™ºèƒ½å‹ç¼©åŠŸèƒ½
- âœ… ç‰ˆæœ¬ç®¡ç†å’Œè‡ªåŠ¨æ¸…ç†
- âœ… å¢é‡å¤‡ä»½æ”¯æŒï¼ˆå†…å®¹å»é‡ï¼‰
- âœ… å¼‚æ­¥å¤‡ä»½é˜Ÿåˆ—
- âœ… é˜²æŠ–åŠ¨æœºåˆ¶
- âœ… åŒåˆ—è¡¨è¿‡æ»¤æ¨¡å¼
- âœ… æ–‡ä»¶é¢„è§ˆåŠŸèƒ½

### V2.0.0
- åŸºç¡€å¤‡ä»½åŠŸèƒ½
- é¢„è®¾è¿‡æ»¤å™¨
- å®æ—¶ç›‘æ§


## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ™ è‡´è°¢

- [efsw](https://github.com/SpartanJ/efsw) - è·¨å¹³å°æ–‡ä»¶ç³»ç»Ÿç›‘æ§
- [nlohmann/json](https://github.com/nlohmann/json) - ç°ä»£ C++ JSON åº“
- [spdlog](https://github.com/gabime/spdlog) - å¿«é€Ÿ C++ æ—¥å¿—åº“
- [zlib](https://www.zlib.net/) - æ•°æ®å‹ç¼©åº“

